---
title: "é«˜é€Ÿã§è¨˜è¿°ãŒç°¡å˜ãª find ã‚³ãƒãƒ³ãƒ‰ã®ä»£æ›¿ã€Œfdã€"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["CLI", "find", "fd", "ã‚³ãƒãƒ³ãƒ‰"]
published: true
---

# ã¾ãˆãŒã

GNU find ã‚’ä½¿ã£ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã™ã®ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æŒ‡å®šã«å«Œæ°—ãŒã•ã—ã€ã‚‚ã£ã¨ä¾¿åˆ©ãªã‚‚ã®ãŒã‚ã‚‹ã¯ãšã ã¨æ€ã£ã¦æ¤œç´¢ã—ãŸã‚‰è¦‹ã¤ã‘ãŸã€‚

`fd` ã¯ãŸã¶ã‚“åŒã˜ã‚ˆã†ã« `find` ã®ãƒ‘ã‚¿ãƒ¼ãƒ³è¦–ç¨‹ã®å†—é•·ã•ã«å«Œæ°—ãŒã•ã—ãŸäººãŒä½œã£ãŸã‚“ã ã¨æ€ã†ã€‚

# fd ã®ç‰¹å¾´

- ã¯ã‚„ã„
- ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒçŸ­ãæ›¸ã‘ã‚‹
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ­£è¦è¡¨ç¾ã‚’ä½¿ãˆã‚‹
- ã‚¹ãƒãƒ¼ãƒˆãª case åˆ¤å®šï¼šãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¤§æ–‡å­—ã‚’å«ã‚€å ´åˆã®ã¿å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹
- çµæœãŒè‰²ä»˜ãã§è¦‹ã‚„ã™ã„
- `.` ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ `.gitignore` ã§æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡è¦–ã™ã‚‹
- ã‚³ãƒãƒ³ãƒ‰ãŒ `find` ã«æ¯”ã¹ã¦ 50% çŸ­ã„

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã“ã“ã«æ–¹æ³•ãŒæ›¸ã„ã¦ã‚ã‚‹ã€‚

- [sharkdp/fd: A simple, fast and user-friendly alternative to 'find'](https://github.com/sharkdp/fd)

## Ubuntu 18 on WSL 2 ã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`dpkg` ã‚’ç”¨ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```sh
wget https://github.com/sharkdp/fd/releases/download/v8.2.1/fd_8.2.1_amd64.deb
sudo dpkg -i fd_8.2.1_amd64.deb
```

## Windows 10 ã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Scoop ã‚‚ã—ãã¯ Chocolatey ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚

```sh
scoop install fd
```

# ä½¿ã„æ–¹ã®ä¾‹

## ãƒ•ã‚¡ã‚¤ãƒ«åã§æ¤œç´¢

`fd` ã«ç¶šã‘ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§æ¤œç´¢ã§ãã‚‹ã€‚

```sh
% fd pon
components
img/pon.svg
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã‚’æ¤œç´¢

GNU find ã¨é•ã„ `fd pattern... directory` ã®ã‚ˆã†ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé€†é †ã«ãªã‚‹ã€‚

```sh
% fd pon img
img/pon.svg
```

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ­£è¦è¡¨ç¾ãŒä½¿ãˆã‚‹

```sh
% fd '^a.*e$'
App.vue
components/pages/ApplyDone.vue
components/pages/ApplyForm.vue
components/pages/ApplyIndex.vue
```

## ãƒ•ã‚¡ã‚¤ãƒ«åã® OR æ¡ä»¶ã§æ¤œç´¢

æ­£è¦è¡¨ç¾ãŒä½¿ãˆã‚‹ã®ã§ `|` ã‚’ä½¿ç”¨ã™ã‚Œã°ã‚ˆã„ã€‚

```sh
% fd 'copy|preview'
src\css\public\sections\preview.styl
tasks\copy.js
```

## æ‹¡å¼µå­ã§æ¤œç´¢

`-e ext` ã‚’æŒ‡å®šã™ã‚‹ã¨æ‹¡å¼µå­ã§æ¤œç´¢ã§ãã‚‹ã€‚`.` ã¯ä¸è¦ã€‚è¤‡æ•°æŒ‡å®šã™ã‚‹ã¨ OR æ¤œç´¢ã«ãªã‚‹ã€‚

```sh
% fd -e js -e vue
App.vue
ajaxzip.js
api.js
...
```

## æ‹¡å¼µå­ã¨åå‰ã®çµ„ã¿åˆã‚ã›

å˜ç´”ã«ãã‚Œãã‚Œã‚’é †ä¸åŒã§ä¸¦ã¹ã‚‹ã€‚ä¸‹è¨˜ã®ä¾‹ã§ã¯ `fd map -e xml` ã¨ã—ã¦ã‚‚ã‚ˆã„ã€‚

```sh
% fd -e xml map
common/views/sitemap.xml
```

## ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é™¤å¤–ã™ã‚‹

`-E pattern` ã§ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é™¤å¤–ã§ãã‚‹ã€‚

```sh
% fd map -E vendor
common/supports/SitemapBase.php
common/views/partials/use_google_maps.html
common/views/sitemap.xml
```

ã“ã“ã¯æ­£è¦è¡¨ç¾ã§ã¯ãªã glob å½¢å¼ã¨ãªã£ã¦ã„ã‚‹ã€‚

```sh
% fd map -E '*.bak'
```

## æ¤œç´¢çµæœã«å¯¾ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹

`-x` ã«ç¶šã‘ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹ã€‚

å¾Œè¿°ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã‚’è¨˜è¿°ã—ãªã‹ã£ãŸå ´åˆã¯ã€ã‚³ãƒãƒ³ãƒ‰ã®æœ€å¾Œã«å¼•æ•°ã¨ã—ã¦æ¤œç´¢çµæœãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚

```sh
% fd -e html map -x wc -l
49 public/views/sitemap.html
6 public/views/partials/require_google_maps.html
1 common/views/partials/use_google_maps.html
```

ä¾¿åˆ©ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã‚’ä½¿ã£ã¦ ImageMagick ã§å½¢å¼ã‚’å¤‰æ›ã™ã‚‹ä¾‹ã€‚

```sh
% fd -e png -x convert {} {.}.jpg
# => convert image.png image.jpg ã®ã‚ˆã†ã«å±•é–‹ã•ã‚Œã‚‹
```

ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã¯æ¬¡ã®ã‚‚ã®ãŒä½¿ç”¨ã§ãã‚‹ã€‚

- `{}`: æ¤œç´¢çµæœã®ãƒ‘ã‚¹ãã®ã¾ã¾ (documents/images/party.jpg)
- `{.}`: æ‹¡å¼µå­ã‚’é™¤ã„ãŸã‚‚ã® (documents/images/party)
- `{/}`: ãƒ•ã‚¡ã‚¤ãƒ«å (basename) ã®ã¿ (party.jpg)
- `{//}`: è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (documents/images)
- `{/.}`: æ‹¡å¼µå­ã‚’é™¤ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«å (basename) ã®ã¿ (party)
